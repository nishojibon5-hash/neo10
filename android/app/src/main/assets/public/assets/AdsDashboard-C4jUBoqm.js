import{r as d,j as s,g as r}from"./index-Cny3-YC3.js";import{L as u}from"./Layout-63m88gTv.js";import{B as n}from"./button-vWn4QgZQ.js";function j(){const[o,c]=d.useState([]),a=async()=>{const e=await fetch("/api/ads/mine",{headers:{Authorization:`Bearer ${r()}`}});if(e.ok){const t=await e.json();c(t.ads||[])}};d.useEffect(()=>{a()},[]);const l=async(e,t)=>{(await fetch(`/api/ads/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r()}`},body:JSON.stringify({status:t})})).ok&&a()},m=async e=>{const t=prompt("Payment method (bKash/Nagad)")?.trim(),i=prompt("Transaction ID")?.trim();if(!t||!i)return;(await fetch(`/api/ads/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r()}`},body:JSON.stringify({payment_method:t,transaction_id:i})})).ok&&a()};return s.jsx(u,{children:s.jsxs("div",{className:"mx-auto max-w-3xl space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Ads Dashboard"}),s.jsx("a",{href:"/ads/create",children:s.jsx(n,{children:"Create new"})})]}),s.jsx("div",{className:"grid gap-3",children:o.map(e=>s.jsxs("div",{className:"rounded-xl border bg-card p-3 flex gap-3 items-center",children:[e.media_url?e.media_type==="video"?s.jsx("video",{src:e.media_url,className:"h-16 rounded"}):s.jsx("img",{src:e.media_url,className:"h-16 rounded"}):null,s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold",children:e.title}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Status: ",e.effective_status||e.status," â€¢ Impressions: ",e.impressions??0]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n,{size:"sm",variant:"outline",onClick:()=>l(e.id,(e.effective_status||e.status)==="active"?"paused":"active"),children:(e.effective_status||e.status)==="active"?"Pause":"Activate"}),e.effective_status==="invoice_due"?s.jsx(n,{size:"sm",onClick:()=>m(e.id),children:"Mark as paid"}):null]})]},e.id))})]})})}export{j as default};
