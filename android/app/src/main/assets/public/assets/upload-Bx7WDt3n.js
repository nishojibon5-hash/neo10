import{g as i}from"./index-Cny3-YC3.js";function c(t){return new Promise((r,o)=>{const e=new FileReader;e.onload=()=>{const a=String(e.result||""),n=a.indexOf(",");r(n>=0?a.slice(n+1):a)},e.onerror=()=>o(e.error||new Error("read error")),e.readAsDataURL(t)})}async function p(t){const r=await c(t),o=i(),e={"Content-Type":"application/json"};o&&(e.Authorization=`Bearer ${o}`);const a=await fetch("/api/assets/base64",{method:"POST",headers:e,body:JSON.stringify({filename:t.name,mime_type:t.type||"application/octet-stream",data:r})});if(!a.ok){const s=await a.json().catch(()=>({}));throw new Error(s.error||"Upload failed")}return(await a.json()).url}export{p as u};
